import { Component } from '@angular/core';
import {HttpClient, HttpHeaders} from "@angular/common/http";
import { Router } from "@angular/router";
import { BusinessService } from "../business.service";
import { Business } from "../Business";
import {Observable, ReplaySubject, Subscription} from "rxjs";

@Component({
  selector: 'app-search',
  templateUrl: './search.component.html',
  styleUrls: ['./search.component.css']
})
export class SearchComponent {
  localCompanies: Array<Business> = new Array<Business>()
  occurrences: Map<string, number> = new Map() // holds the amount of times each business occurs

  title = 'smallbusiness-ui';
  private apiURL = 'https://dev.virtualearth.net/REST/v1/LocalSearch/?query=' //coffee&userLocation=47.602038,-122.333964&key=%7BBingMapsKey%7D'
  private userLocation = '&userLocation='
  private key = '&key=AnR4Khwxo4KxF35XmhzvhQZghYq8NqhqvB1Akf8kWkOj4c3kzINYy2GbQP1YkSpD'

  brands : string[] = ["Wal-Mart Stores", "Exxon Mobil","Tim Hortons", "General Motors", "Ford Motor", "Enron", "General Electric", "Citigroup", "ChevronTexaco", "Intl. Business Machines", "Philip Morris", "Verizon Communications", "American International Group", "American Electric Power", "Duke Energy", "AT&T", "Boeing", "El Paso", "Home Depot", "Bank of America Corp.", "Fannie Mae", "J.P. Morgan Chase & Co.", "Kroger", "Cardinal Health", "Merck", "State Farm Insurance Cos.", "Reliant Energy", "SBC Communications", "Hewlett-Packard", "Morgan Stanley Dean Witter", "Dynegy", "McKesson", "Sears Roebuck", "Aquila", "Target", "Procter & Gamble", "Merrill Lynch", "AOL Time Warner", "Albertson's", "Berkshire Hathaway", "Kmart", "Freddie Mac", "WorldCom", "Marathon Oil", "Costco Wholesale", "Safeway", "Compaq Computer", "Johnson & Johnson", "Conoco", "Pfizer", "J.C. Penney", "MetLife", "Mirant", "Dell Computer", "Goldman Sachs Group", "United Parcel Service", "Motorola", "Allstate", "TXU", "United Technologies", "Dow Chemical", "ConAgra", "Prudential Financial", "PepsiCo", "Wells Fargo", "Intel", "International Paper", "Delphi", "Sprint", "New York Life Insurance", "E.I. du Pont de Nemours", "Georgia-Pacific", "Microsoft", "Walt Disney", "Aetna", "Ingram Micro", "Lucent Technologies", "Lockheed Martin", "Walgreen", "Bank One Corp.", "TIAA-CREF", "Phillips Petroleum", "BellSouth", "Honeywell International", "UnitedHealth Group", "Viacom", "Supervalu", "PG&E Corp.", "Alcoa", "American Express", "Wachovia Corp.", "Lehman Brothers Holdings", "Cisco Systems", "CVS", "Lowe's", "Sysco", "Bristol-Myers Squibb", "Electronic Data Systems", "Caterpillar", "Coca-Cola", "Archer Daniels Midland", "AutoNation", "Qwest Communications", "FedEx", "Mass. Mutual Life Insurance", "Pharmacia", "FleetBoston Financial", "Cigna", "AMR", "Loews", "Solectron", "Johnson Controls", "Sun Microsystems", "HCA", "Visteon", "Sara Lee", "Washington Mutual", "Tech Data", "Federated Department Stores", "Raytheon", "Xerox", "U.S. Bancorp", "TRW", "Abbott Laboratories", "Northwestern Mutual", "UAL", "Minnesota Mining & Mfg.", "AmerisourceBergen", "Coca-Cola Enterprises", "Fleming", "Emerson Electric", "Best Buy", "Rite Aid", "Publix Super Markets", "Hartford Financial Services", "Exelon", "Nationwide", "Xcel Energy", "Valero Energy", "McDonald's", "Weyerhaeuser", "Kimberly-Clark", "Liberty Mutual Insurance Group", "May Department Stores", "Goodyear Tire & Rubber", "Wyeth", "Occidental Petroleum", "Household International", "Delta Air Lines", "Gap", "Lear", "Northrop Grumman", "Amerada Hess", "Halliburton", "Deere", "Eastman Kodak", "CMS Energy", "Circuit City Stores", "Cinergy", "Anheuser-Busch", "Winn-Dixie Stores", "Avnet", "WellPoint Health Networks", "Sunoco", "Textron", "Edison International", "General Dynamics", "Tenet Healthcare", "Union Pacific", "PacifiCare Health Systems", "Farmland Industries", "Eli Lilly", "Waste Management", "Office Depot", "Williams", "Toys `R` Us", "Oracle", "Tyson Foods", "Staples", "TJX", "Dominion Resources", "Computer Sciences", "Manpower", "Dana", "Anthem", "Allegheny Energy", "Whirlpool", "Humana", "Southern", "Marriott International", "MBNA", "Arrow Electronics", "Health Net", "Marsh & McLennan", "Northwest Airlines", "Public Service Enterprise Group", "Schering-Plough", "Illinois Tool Works", "Comcast", "Consolidated Edison", "Entergy", "AES", "AFLAC", "NiSource", "Nike", "UnumProvident", "H.J. Heinz", "Colgate-Palmolive", "Limited", "John Hancock Financial Services", "Express Scripts", "Burlington Northern Santa Fe", "Agilent Technologies", "National City Corp.", "Fluor", "United Services Automobile Assn.", "Continental Airlines", "Cendant", "St. Paul Cos.", "Guardian Life Ins. Co. of America", "Kellogg", "Principal Financial", "SCI Systems", "Bear Stearns", "R.J. Reynolds Tobacco", "Ashland", "FPL Group", "Progress Energy", "Pepsi Bottling", "SunTrust Banks", "Dillard's", "Smurfit-Stone Container", "Anadarko Petroleum", "Masco", "US Airways Group", "Genuine Parts", "Texas Instruments", "PPG Industries", "CSX", "Conseco", "Gillette", "Sempra Energy", "FirstEnergy", "Clear Channel Communications", "Cenex Harvest States", "DTE Energy", "Aramark", "Aon", "Baxter International", "Chubb", "Alltel", "Calpine", "Nextel Communications", "Kohl's", "Progressive", "American Standard", "Boise Cascade", "KeyCorp", "Applied Materials", "Eaton", "Capital One Financial", "Bank of New York Co.", "Crown Cork & Seal", "EMC", "General Mills", "AdvancePCS", "Automatic Data Processing", "Safeco", "Tricon Global Restaurants", "PNC Financial Services Group", "Newell Rubbermaid", "KeySpan", "Omnicom Group", "Northeast Utilities", "Plains All American Pipeline", "ArvinMeritor", "Oneok", "Avaya", "Unocal", "Interpublic Group", "Navistar International", "Centex", "Campbell Soup", "Fifth Third Bancorp", "First Data", "Premcor", "Lincoln National", "Gannett", "Sonic Automotive", "Corning", "Dean Foods", "BB&T Corp.", "United Auto Group", "Norfolk Southern", "Science Applications Intl.", "Paccar", "Gateway", "Saks", "Lennar", "Avista", "Unisys", "Owens-Illinois", "Avon Products", "Parker Hannifin", "NCR", "Smithfield Foods", "Rohm & Haas", "Conectiv", "ServiceMaster", "PPL", "Air Products & Chemicals", "Cummins", "Idacorp", "State Street Corp.", "Nordstrom", "Caremark Rx", "Allied Waste Industries", "Southwest Airlines", "Medtronic", "Providian Financial", "VF", "Federal-Mogul", "Eastman Chemical", "Baker Hughes", "Pulte Homes", "Apple Computer", "Dollar General", "Fortune Brands", "R.R. Donnelley & Sons", "USA Networks", "Charles Schwab", "BJ's Wholesale Club", "Ikon Office Solutions", "Tribune", "TransMontaigne", "Tesoro Petroleum", "Praxair", "American Family Ins. Group", "Engelhard", "Sherwin-Williams", "Goodrich", "Ryder System", "CNF", "Barnes & Noble", "Graybar Electric", "Countrywide Credit Industries", "AutoZone", "Mattel", "RadioShack", "Owens Corning", "W.W. Grainger", "Adams Resources & Energy", "Pitney Bowes", "Dole Food", "ITT Industries", "KB Home", "McGraw-Hill", "OfficeMax", "Park Place Entertainment", "Sierra Pacific Resources", "Estee Lauder", "Maytag", "Hershey Foods", "Pinnacle West Capital", "Dover", "Micron Technology", "Ameren", "Murphy Oil", "D.R. Horton", "Willamette Industries", "Quantum", "Golden West Financial", "Oxford Health Plans", "Cablevision Systems", "Healthsouth", "Foot Locker", "Administaff", "Black & Decker", "Jabil Circuit", "Mutual of Omaha Insurance", "Rockwell Automation", "Golden State Bancorp", "Longs Drug Stores", "Levi Strauss", "Kelly Services", "NorthWestern", "Cooper Industries", "Computer Associates Intl.", "Comerica", "Temple-Inland", "Lexmark International", "Nucor", "Hormel Foods", "SPX", "Leggett & Platt", "Nash Finch", "Jones Apparel Group", "Cox Communications", "Mellon Financial Corp.", "Sanmina-SCI", "Regions Financial", "Darden Restaurants", "Pathmark Stores", "Amgen", "MGM Mirage", "Pittston", "Phelps Dodge", "Echostar Communications", "Group 1 Automotive", "AK Steel Holding", "Autoliv", "MeadWestvaco", "Encompass Services", "Starwood Hotels & Resorts", "CDW Computer Centers", "Jacobs Engineering Group", "LTV", "Charter Communications", "American Financial Group", "York International", "Wisconsin Energy", "Constellation Energy", "United Stationers", "Clorox", "Advanced Micro Devices", "Steelcase", "Fidelity National Financial", "Peter Kiewit Sons'", "FMC", "Owens & Minor", "Avery Dennison", "Maxtor", "Danaher", "Energy East", "NTL", "Becton Dickinson", "Host Marriott", "First American Corp.", "SouthTrust Corp.", "Pacific LifeCorp", "Harrah's Entertainment", "Ball", "Brunswick", "Family Dollar Stores", "Wesco International", "Ames Department Stores", "Kerr-McGee", "Quest Diagnostics", "Smith International", "Spartan Stores", "USA Education", "Interstate Bakeries", "Roundy's", "Scana", "Liz Claiborne", "Mohawk Industries", "Adelphia Communications", "Big Lots", "Core-Mark International", "Emcor Group", "Foster Wheeler", "Borders Group", "Shopko Stores", "AmSouth Bancorp.", "Puget Energy", "Tenneco Automotive", "Harley-Davidson", "Western Gas Resources", "Bethlehem Steel", "Jefferson-Pilot", "Burlington Resources", "Allmerica Financial", "USG", "Yellow", "Northern Trust Corp.", "Aid Association for Lutherans", "Performance Food Group", "JDS Uniphase", "Lyondell Chemical", "Airborne", "Comdisco", "NSTAR", "OGE Energy", "Staff Leasing", "Enterprise Products", "PepsiAmericas", "Cooper Tire & Rubber", "Coventry Health Care", "Anixter International", "Union Planters Corp.", "Armstrong Holdings", "Equity Office Properties", "Amazon.Com", "Lennox International", "American Axle & Mfg.", "C.H. Robinson Worldwide", "Kindred Healthcare", "Devon Energy", "Sealed Air", "Hilton Hotels", "New York Times", "Hughes Supply", "Vulcan Materials", "Universal", "Auto-Owners Insurance", "Neiman Marcus", "3Com", "H&R Block", "Reebok International", "Ross Stores", "Trigon Healthcare", "Unified Western Grocers", "Payless Shoesource", "TruServ", "Pioneer-Standard Electronics", "Knight-Ridder", "Ace Hardware", "United Rentals", "Fisher Scientific International", "Hasbro", "KPMG Consulting", "Charter One Financial", "Thermo Electron", "Universal Health Services", "A.G. Edwards", "Transocean Sedco Forex", "Rockwell Collins", "Solutia", "Pactiv", "Wackenhut", "Pentair", "Roadway", "Alliant Energy", "Apache", "Ruddick", "Ryland Group", "Crompton", "Lutheran Brotherhood", "IMC Global", "Spherion", "Beverly Enterprises", "Marshall & Ilsley Corp.", "Guidant", "Torchmark", "Manor Care", "Qualcomm", "WPS Resources", "Boston Scientific", "Triad Hospitals", "PolyOne", "Starbucks", "TECO Energy", "Sovereign Bancorp", "Pantry", "Nacco Industries", "Stanley Works", "NVR", "Hercules", "Sonoco Products", "Stryker", "Telephone & Data Systems", "Earthgrains", "M & T Bank Corp.", "Stater Bros. Holdings", "Citizens Communications", "Genesis Health Ventures", "Popular", "Cincinnati Financial", "Henry Schein", "National Service Industries", "Nicor", "AGCO", "Unitrin", "Fleetwood Enterprises", "Michaels Stores", "International Multifoods", "American Greetings", "Reader's Digest Association", "Advance Auto Parts", "Scientific-Atlanta", "Service Corp. International", "Potomac Electric Power", "PetsMart", "Alberto-Culver", "Penn Traffic", "Dura Automotive Systems", "Brinker International", "Sabre Holdings", "UGI", "Tower Automotive", "Mandalay Resort Group", "Footstar", "USFreightways", "First Tennessee National Corp.", "U.S. Industries", "Robert Half International", "Bowater", "Huntington Bancshares", "Timken", "Commercial Metals", "CellStar", "Exide Technologies", "Wm. Wrigley Jr.", "Adolph Coors", "Burlington Coat Factory", "Phoenix Companies", "Washington Post", "ADC Telecommunications", "Constellation Brands", "Bed Bath & Beyond", "Erie Insurance Group", "Wendy's International", "Old Republic International", "McCormick", "OM Group", "Molex", "Louisiana-Pacific", "Franklin Resources", "Ecolab", "PNM Resources", "BorgWarner", "Broadwing", "L-3 Communications", "Weatherford International", "Precision Castparts", "Convergys", "URS", "Pennzoil-Quaker State", "Value City", "Bemis", "Kellwood", "Belk", "Analog Devices", "Whole Foods Market", "Peoples Energy", "Mail-Well", "Republic Services", "La-Z-Boy", "Ryerson Tull", "Chiquita Brands International", "Consolidated Freightways", "Herman Miller", "Budget Group", "BJ Services", "Toll Brothers", "Polo Ralph Lauren", "Nabors Industries", "MDU Resources Group", "Pilgrim's Pride", "Laboratory Corp. of America", "Tellabs", "Western Resources", "Pep Boys-Manny, Moe & Jack", "Equity Residential Properties", "LandAmerica Financial Group", "Vectren", "Cintas", "Omnicare", "Maxxam", "Alaska Air Group", "American National Insurance", "Allegheny Technologies", "Outback Steakhouse", "MDC Holdings", "Sun Healthcare Group", "CenturyTel", "National Semiconductor", "Swift Transportation", "CUNA Mutual Group", "Harsco", "Hillenbrand Industries", "Wyndham International", "Kla-Tencor", "MONY Group", "National Fuel Gas", "J.B. Hunt Transport Services", "Williams-Sonoma", "Snap-On", "Mariner Post-Acute Network", "Insight Enterprises", "Nortek", "PeopleSoft", "Synovus Financial Corp.", "Zale", "America West Holdings", "Affiliated Computer Services", "E*Trade Group", "Simon Property Group", "New Jersey Resources", "Siebel Systems", "Storage Technology", "Quanta Services", "Zions Bancorp.", "Compuware", "RPM", "Bell Microproducts", "General Cable Corporation", "Volt Information Sciences", "Metaldyne", "Charming Shoppes", "Weis Markets", "Dollar Tree Stores", "Beckman Coulter", "Protective Life", "CBRL Group", "Scholastic", "Harris", "Western Digital", "Ingles Markets", "ABM Industries", "W.R. Berkley", "Silgan Holdings", "WGL Holdings", "TravelCenters of America", "Southern Union", "SunGard Data Systems", "Casey's General Stores", "Safeguard Scientifics", "Brown-Forman", "CH2M Hill", "Walter Industries", "Valspar", "Flowserve", "Teleflex", "Trinity Industries", "Ohio Casualty", "Compass Bancshares", "Furniture Brands International", "Fiserv", "Sentry Insurance Group", "DynCorp", "Frontier Oil", "Alpine Group", "Corn Products International", "Health Management Associates", "Marsh Supermarkets", "Lithia Motors", "Magellan Health Services", "Silicon Graphics", "Metris", "Carlisle", "Lubrizol", "Intl. Flavors & Fragrances", "Freeport-McMoRan Copper & Gold", "Jack in the Box", "Worthington Industries", "Brightpoint", "Linens'n Things", "Collins & Aikman", "PSS World Medical", "Amerco", "Terex", "McLeodUSA", "Gold Kist", "Rent A Center", "Kennametal", "Mid Atlantic Medical Services", "Beazer Homes USA", "Seaboard", "Minnesota Life Ins.", "Hon Industries", "Packaging Corp. of America", "LSI Logic", "Dow Jones", "WestPoint Stevens", "Equitable Resources", "Diebold", "W.R. Grace", "Brown Shoe", "Sequa", "Potlatch", "Scotts Company", "National Oilwell", "Primedia", "Hovnanian Enterprises", "Southern States Coop.", "Paychex", "Hawaiian Electric Industries", "Greenpoint Financial", "Harman Intl. Industries", "Bausch & Lomb", "Concord EFS", "Cabot", "Dial", "Energizer Holdings", "Community Health Systems", "Integrated Electrical Services", "Wallace Computer Services", "Allergan", "Metals USA", "EGL", "Allete", "Reliance Steel & Aluminum", "DST Systems", "Viad", "Xilinx", "Raymond James Financial", "Newmont Mining", "Vishay Intertechnology", "EOG Resources", "Expeditors Intl of Washington", "DaVita", "D&K Healthcare Resources", "Applera", "UST", "Flowers Foods", "Airgas", "Applied Industrial Technologies", "Quintiles Transnational", "Tiffany & Co", "Ciena", "PerkinElmer", "Great Lakes Chemical", "Millennium Chemicals", "Crane", "StanCorp Financial", "Maxim Integrated Products", "Agway", "Noble Affiliates", "Jo Ann Stores", "Lands' End", "Cooper Cameron", "Black Hills", "Stilwell Financial", "Perini", "Thomas & Betts", "Imperial Sugar", "MPS Group", "Champion Enterprises", "Granite", "National Commerce Financial", "Systemax", "Comfort Systems USA", "Greif Bros.", "Astoria Financial", "Shaw Group", "Di Giorgio", "Equifax", "Legg Mason", "ACT Manufacturing", "Level 3 Communications", "RGS Energy Group", "Universal Forest Products", "World Fuel Services", "Unova", "Arkansas Best", "GATX", "Lam Research", "Amkor Technology", "Pride International", "Polaris Industries", "Del Monte Foods", "Mercury General", "Martin Marietta Materials", "US Oncology", "Banknorth Group", "BMC Software", "Ferro", "Veritas Software", "Arch Coal", "CDI", "GenCorp", "Hibernia Corp.", "Sierra Health Services", "Atmel", "AIMCO", "Great Plains Energy", "E.W. Scripps", "Banta", "Symbol Technologies", "TMP Worldwide", "Oshkosh Truck", "Unisource Energy", "Atmos Energy", "Rock-Tenn", "Teradyne", "Questar", "American Water Works", "CSK Auto", "CKE Restaurants", "American Power Conversion", "Phillips-Van Heusen", "Cadence Design Systems", "Sports Authority", "Pier 1 Imports", "Fairchild Semiconductor Intl.", "Kemet", "Burlington Industries", "Dreyer's Grand Ice Cream", "Dimon", "Stewart & Stevenson Services", "Tecumseh Products", "Markel", "Southwest Gas", "Landstar System", "Advantica", "National Rural Utilities Cooperative", "Trans World Entertainment", "Metro-Goldwyn-Mayer", "Cytec Industries", "Standard Pacific", "Hollywood Entertainment", "Gentiva Health Services", "American Eagle Outfitters", "OneAmerica Financial", "Nvidia", "Gemstar-TV Guide International", "Acterna", "Abercrombie & Fitch", "Belo", "MGIC Investment", "Toro", "Knights of Columbus", "St. Jude Medical", "Novellus Systems", "Pro-Fac Cooperative", "Provident Financial Group", "IMS Health", "Gentek", "IT Group", "Carpenter Technology", "Electronic Arts", "Revlon", "Stein Mart", "Hub Group", "United Defense Industries", "Briggs & Stratton", "Hubbell", "Regis", "Dun & Bradstreet", "Petco Animal Supplies", "Federated Mutual Insurance", "AnnTaylor", "First National of Nebraska", "DQE", "Pacific Century Financial", "Deluxe", "Benchmark Electronics", "Amtran", "H.B. Fuller", "Men's Wearhouse", "Stewart Information Services", "Olin", "Werner Enterprises", "Comverse Technology", "Varco International", "Audiovox", "Amica Mutual Insurance", "Milacron", "Intuit", "Kimball International", "XO Communications", "Domino's", "Ocean Energy", "Massey Energy", "Texas Industries", "Riverwood Holding", "EarthLink", "Ceridian", "Union Central Life", "Phar-Mor", "Watsco", "Foamex International", "CMGI", "Pall", "Harleysville Mutual Insurance", "Tektronix", "Oglethorpe Power", "IDT", "Adobe Systems", "Alleghany", "Genzyme", "MasTec", "Genuity", "North Fork Bancorp.", "Grey Global", "Ivax", "AMC Entertainment", "On Semiconductor", "Software Spectrum", "Viasystems Group", "Georgia Gulf", "Forest Laboratories", "Perot Systems", "Trump Hotels & Casino Resorts", "FelCor Lodging", "DPL", "International Game Technology", "Blyth", "TCF Financial Corp.", "Sealy", "Standard Register", "eMerge Interactive", "Handleman", "Goody's Family Clothing", "Alexander & Baldwin", "Daisytek International", "Timberland", "American Management Systems", "C.R. Bard", "PC Connection", "Walmart", "Walmart US", "Sam's Club", "CVS incl. Target", "Amazon", "Albertsons", "Apple incl. Online", "Apple US Retail Stores", "Costco", "Walgreen Boots", "Publix", "Ahold", "Macy's", "Aldi", "Dollar Tree", "HEB", "Sears Holdings", "Sears US", "Delhaize", "Meijer", "Wakefern", "Whole Foods", "BJ's", "Seven & I", "JC Penney", "Ross", "L Brands", "Menards", "Southeastern Grocers", "Health Mart", "Hy-Vee", "O'Reilly", "Wegmans", "QVC", "SONIC Drive In", "Dairy Queen", "Carl's Jr", "Arby's", "Burger King", "Filippi's Pizza Grotto", "Sbarro", "In-N-Out Burger", "Casey's General Store", "Pizza Hut", "Church's Chicken", "Chipotle Mexican Grill", "Chick-Fil-A", "Taco Bell", "Boston Market", "Baskin-Robbins", "Ameci Pizza & Pasta", "Ak Buffet", "SUBWAY", "Little Caesars Pizza", "Barro's Pizza", "KFC", "KFC - Kentucky Fried Chicken", "Long John Silver's", "Fat Patty's", "Boys Burgers", "Culver's", "Mr. Hero", "Topper's Pizza", "SONIC Drive-In", "Panda Express", "Whataburger", "Wendy's", "Golden Chick", "Firehouse Subs", "Einstein Bros Bagels", "Band Box Diner", "Cupie's Drive-In", "Quiznos", "Jersey Mike's Subs", "Tom's Drive In", "Del Taco", "Boston Burger Company", "Romas Pizza", "Krystal", "Bob Evans", "Checkers", "Hardee's", "Panera Bread", "Wienerschnitzel", "Pony Express To Go", "Popeyes", "Sonic", "Gambino's Pizza", "Primo's Pizza", "Simple Simon's Pizza", "Rally's", "CASA Mexicana", "West Point Pizza", "Jimmy John's", "McAlister's Deli", "Barberitos", "Cook Out", "Mrs. Fields", "Taco Mayo", "Tacconelli's Pizza", "Guerrazzi's", "Gus's Carryout", "Moe's Southwest Grill", "Siam Fusion", "Spangles", "Taco Bueno", "Steak Escape", "Togo's", "Players Grill", "Mr. Chicken", "B.GOOD", "Taco Casa", "Sam's Gyros", "SUBWAY¬Æ", "Bojangles' Famous Chicken 'n Biscuits", "Back Yard Burgers", "Steak N Shake", "Waffle House", "Pei Wei", "Raising Cane's Chicken Fingers", "Sumo Steaks", "Five Guys", "Dragon Dragon", "Crown Fried Chicken", "Tumby's Pizza", "Round Table Pizza", "Italo's Pizza", "Creperie", "Qdoba Mexican Eats", "Fat Mo's Burgers", "Charley's Grilled Subs", "Miss Katie's Diner", "Hunan Gardens", "Chronic Tacos", "Shawarma Kebab", "Wild Willy's", "Jake's Wayback Burgers", "El Pollo Loco", "Taco Mama", "King of Wings", "Pretzel Time", "Sarku Japan", "Ivan's Restaurant", "Quiznos Sub", "Fox's Pizza Den", "Toppers Pizza", "Fuddruckers", "Mandarin Garden", "Hernandez Mexican Restaurant", "El Taquito", "Four Burgers", "Penn Station East Coast Subs", "Domino's Pizza", "Glorious Foods Gourmet to go & Catering", "Schlotzsky's", "Chicken Express", "Big House Burgers", "The New Chalet", "Blackjack Pizza", "Gyromania Grill", "Jerry's Subs & Pizza", "Mc Donalds", "Yoshinoya", "China Garden", "Mama's Fried Chicken", "Little Q Hot Pot", "China Restaurant", "Pizza Pub", "Burger Basket", "Grande Italian Restaurant", "Lobster Hut", "Ben and Jerry's", "Taco Time", "Mr. Hoagie", "Fazzari's", "Arni's Crawfordsville", "Taco John's", "Pizza Inn", "Cousin's Subs", "Arctic Circle", "Fosters Freeze", "Starbucks Coffee", "Pizza Barn", "Carl's Jr.", "Dunkin' Donuts", "Taco Bob's", "Rico's Pizza & Subs", "B's Pizza", "White Castle", "Pepperjax Grill", "The Pizza Company", "Joe's Crab Shack", "Steak 'n Shake", "The Sandwich Place", "Papa John's Pizza", "Little Caesar's Pizza", "Maid-rite", "Frates Drive-In", "Jim's Steaks", "Gourmet Grill", "Villa Italian Kitchen", "Jacks N Joe", "Wingstop", "Beef Villa", "Tanuki Sushi Bar and Garden", "Old Carolina Barbecue Company", "Flame Broiler", "Kow Thai Take Out", "iSushi", "Shangri-la Chinese Restaurant", "Blackies Hotdog Stand", "Chun Wah Kam Noodle Factory", "Italian Pizzeria Restaurant", "Sakana", "Port of Subs", "Bubba's Texas Burger Shack", "Ani's Chicken", "Farmer Boys", "Jamba Juice", "Hot Lips Pizza", "Rubio's", "Milk Street Cafe", "Chicken Mary's", "Fuku", "Little Caesars", "Primo Hoagies", "De Afghanan Kabob House", "Raising Cane's", "Moe's Burger Joint", "Bobby's Burger Palace", "W.G. Grinders", "Foster's Freeze", "Caseys Carry Out Pizza", "Tastee Freez", "Loving Hut", "Capriotti's Sandwich Shop", "Italian Village Pizza", "Mustard Seed", "Saladworks", "Jim's Steakout", "Charo Chicken", "Huddle House", "Great Wall Restaurant", "Luby's", "Big Island Pizza", "My Daddy's Pizza & Grille", "Boddie Noell Enterprises Inc", "Roma Pizza", "Cafe Paris", "Abruzzi Pizza", "Bistro To Go", "Arthur Treacher's Fish & Chips", "Blimpie", "Tony Wang's Chinese Restaurant", "D & M Subs", "Danielle Inc", "Smithfield's Chicken 'n Bar-b-q", "Krispy Krunchy Chicken", "Hardee's/red Burrito", "Lacey's On The Hill Restaurant", "Jack in the Box -", "Gangnam Style Korean Kitchen", "Red Baron Drive-In", "Which Wich", "Pizza Pro", "Cottage Inn Pizza", "Grandy's", "Runza", "Eudici's Pizza", "Wolf River Diner", "The Extreme Pita", "Picnic Basket", "Popeyes Louisiana Kitchen", "Natraj's Tandoori", "Acropolis Gyro Palace", "Bennidito's Pizza", "Dick's Hamburgers", "Pick Up Stix", "B Good", "Taco Cabana", "Peach Garden", "Pollo Tropical", "Dominick's Italian Restaurant", "St. Clair Broiler", "Baja Fresh Mexican Grill", "Fatburger", "Charlie's Pizzeria", "Salad Creations", "Price's Chicken Coop", "Jollibee", "Lilly's Restaurant", "Pizza Guys", "Sakura Japanese Restaurant", "Low Chinese American Restaurant", "Boomer's Drive-In", "Johnny's Wife's Place", "Pita's Republic", "Comet Burgers", "Hot Dog on a Stick", "Boardwalk Grill", "Henny Penny Family Restaurant", "Dominion Pizza", "Christo's Original", "Cook St. Helena", "Golden Dragon", "Batter Up", "Quizno's", "ShopHouse Southeast Asian Kitchen", "Mignano Bros", "Backyard Grill", "Gold Star Chili", "Cluck-U Chicken", "Local Burger", "Jon Smith Subs", "Fox's Gourmet Delicatessen", "Great Wraps", "Carvel", "Lin's Garden", "Pretzel Maker", "Penguin Point", "Capri Italian Restaurant", "Chicken Inn", "King Wah", "Regions Bank", "7-Eleven", "KFC/AW", "Shake Shack", "McDonalds", "Bojangles", "Taco Bell / KFC", "Arby's - Closed", "Shell", "Carl's Jr. / Green Burrito", "Shamus's Sandwich Shoppe", "Long John Silvers", "Fajita Grill", "George's Gyros Spot 2", "Lakewood Ranch Baptist Church", "China Buffet", "The Grille", "Good Guys Pizza", "Charleys Philly Steaks", "Islands Restaurant", "The Arch at McDonald's Campus Office Building", "Buona Vita", "Rick's Drive In Out", "Johnson's Popcorn", "Popeyes Chicken Biscuits", "Boloco", "Wolf's Dairy Queen", "Sweet Magnolia's Cafe Bakery", "Hardee's / Red Burrito", "Great American Hamburger Pie Co", "Golden Harvest Chinese Restaurant", "The Flame Broiler", "Penn's Thai Cafe", "Rally's Hamburgers", "Long John Silver's / AW", "Mcdonalds Whitehouse", "Papa Gino's", "Captain D's", "Burger King/Popeyes", "KFC/Taco Bell", "Carl's Jr / Green Burrito", "Bob Evans Restaurant", "El Original", "Old Country Buffet", "Arbys", "Fazoli's", "Los Cotijas Taco Shop", "Hardees", "Photo's Hot Dogs", "Mr Hero", "T-Mobile", "Marathon", "Jimmy Johns", "Errandbug Fast Restaurant Delivery", "Legendz", "Lion's Choice", "Adobe Cantina Salsa", "Orange Julius", "Kasa's Pizza", "The Dog Pit", "Great Bend Taco", "Riviera D'Italia", "Charlie's Restaurant", "Burrito Bros.", "Dunkin Donuts", "Best Gyros", "Steele Pier Hotdogs", "Wendy's Valenti Management", "Skyline Chili", "Tropicana Pizza", "VeganBurg", "Smashburger", "Moe's Cafe", "Vista Drive In", "El Burrito Loco", "China City", "Boston Road Pizza", "Blake's Lotaburger", "Belleria Pizzeria", "Pal's Sudden Service", "Capri Restaurant", "Angelina's Pizza", "Tiffin", "Baker's Drive-thru", "Chanello's Pizza", "High Tech Burrito", "Parkside Gyros", "D'Angelo Grilled Sandwiches", "Dairy Heaven", "Cobani Gyro Kebab", "Zaxby's", "Au Bon Pain", "East of Edens", "Chipotle", "Grand China Chinese Restaurant", "Taco Del Mar", "Pizza Pipeline", "Richard's Pizza", "Nino's Pizzarama", "The Corner Cafe", "Maki Fresh", "Fat Boy Burgers", "Flying J", "China Bowl Take Out Restaurant", "Extreme Pita", "Git-It-N-Git", "GD Bro Burger", "Hometown Buffet", "Ryan's", "Smoothie King", "Famous Dave's", "Sunrise Gyros", "Zankou Chicken", "Rascal's Teriyaki Grill", "Ay Jalisco", "BURGERFI", "Rallys", "Zaxby's Chicken Fingers & Buffalo Wings", "Gyros Express", "Super Wings", "Roche Bros.", "TheMINT Gastropub", "Auntie Anne's Pretzels", "California Tortilla", "Thai Delight", "Bristol 45 Diner", "Sheetz", "Frankies", "Togi's Sub Station", "Citizen Burger Bar", "Tropical Smoothie Cafe", "Papa Joe's Pizza", "HiBoy Drive-in", "El Ranchito Taco Shop", "Bush's Chicken", "Hilton Boston Logan Airport", "Festival Eatery", "Patrick's on Third", "Mason's Famous Lobster Rolls", "Burger House", "Pollo Campero", "All About Burger", "Nathan's Famous", "The Swinging Door", "Long John Silvers / A&W", "Wetzel's Pretzels", "Clambake Seafood Restaurant", "BeanThru", "Taco Bell/KFC", "Cafe Zona Rosa", "Papa Gyros", "Checker's Pizza", "Chinatown Inn", "Kum & Go", "PDQ", "Ray J's American Grill", "New York Pizza Department", "Fashion Cafe", "Qdoba Mexican Grill", "Tam's Burgers", "CD's Wings", "McDonald's of Rolesville", "A&W/Long John Silvers", "Captain D's Seafood", "Wawa", "Popeyes Chicken & Biscuits", "Westchester Burger Company", "Raising Canes", "Panda Express Innovation Kitchen", "Chicken Kitchen", "Jim Bob's Chicken Fingers", "Country Buffet", "Petro's Chili & Chips", "California Chicken Cafe", "Blue Coast Burrito", "Lake Trout 2", "Happy Dragon", "Flaming Grill and Buffet", "Oscar's Restaurant", "Mooney's Ice Cream Store", "Cozumel", "Cremo Drive-In", "Baker's Drive Thru", "Jalsa Indian Fast Food", "Copper Oven Artisan Pizza", "La Hacienda Mexican Restaurant", "Flushing A", "Halo Burger", "Garden Catering", "Ocean Empire Restaurant", "Kismet", "Miguel's Jr", "Mickey's Gyros & Ribs", "Pilot Travel Center", "Fratellos Hot Dogs", "Taco Bell/Pizza Hut", "Burger King¬Æ", "Fast Eddie's MOAB", "Lupo's Char-Pit", "A's Ace Burgers", "Original Tommy's Hamburgers", "Wienerschitzel", "Jack's Goal Line Stand", "Bucky's Family Restaurant", "Little Italy", "Sam's Pizza Restaurant", "Hobo's Korner Kitchen", "Mangia Pizza", "Carl's Jr. / The Green Burrito", "Jason's Deli", "Andy's Frozen Custard", "Portillo's", "Johnny Rockets", "Taqueria", "Umami Burger", "King Gyros", "Five Guys Burgers And Fries", "KFC/Long John Silvers", "Zio's Italian Kitchen", "Auntie Anne's", "Walmart Supercenter", "Jimmy's Grotto", "Eegee's", "Earth Fare", "B&D Burgers", "Nick's Gyros", "90 Miles Cuban Cafe", "Tonys Pizza", "Sesame Burgers & Beer", "Braum's", "Hon Lin Restaurant", "Popeye's Louisiana Kitchen", "McDonalds's", "Mah's Garden Restaurant", "Chicago Pizza With A Twist", "Dairy Queen (Treat Only)", "Five Guys Burgers Fries", "Megs Drive In", "The Hotdog Shoppe", "Kumagoro Fine Japanese Restaurant and Sushi Bar", "Wingstop Restaurant", "Whipper's Pizza", "Kim's Oriental Kitchen", "Chinatown Express", "Old Mill Crab House", "Mr Taco", "Surfside Burger Shack", "The 50's Cafe", "Papa J's", "Wise Guys A Chicago Eatery", "Sonic America's Drive-In", "Heff's Burgers", "El Pollo Regio", "El Sombrero", "Genghis Grill", "Palio's Pizza Cafe", "Ly's Cafe", "Poki Roll", "Sub Conscious", "Bad Daddy's Burger Bar", "Kosta's Gyros", "Bell's Pizza", "The Hat", "Don & Millie's", "Ben & Jerry's", "Mr. Gyros Greek Food & Pastry", "Legends Burgers", "Plato's Closet", "Stoko's", "Dunkin'"]

  subscription: Subscription = new Subscription()

  httpOptions = {
    headers: new HttpHeaders({'Content-Type': 'application/json'})
  }

  constructor(private http: HttpClient, private router: Router) {
  }

  ngOnInit(): void {
    this.localCompanies = new Array<Business>()
  }

  /**
   * save a list of local business near where the user specified
   * @param latitude user's latitude
   * @param longitude user's longitude
   * @param type the type of business they want to find (ex: coffee)
   */
  async getLocalBusinesses(latitude: string, longitude: string, type: string): Promise<void> { // Observable<Business>[]
    //return fetch(this.apiURL + type + this.userLocation + latitude + ',' + longitude + this.key)
    //  .then(response => response.json()).then(.json => console.log(json))
    this.localCompanies = new Array<Business>()
    this.http.get<string>(this.apiURL + type + "&maxResults=25" + this.userLocation + latitude + ',' + longitude + this.key).subscribe(info => {
      var test = JSON.parse(JSON.stringify(info));
      //console.log(test.resourceSets[0].resources)
      for (let i = 0; i < test.resourceSets[0].resources.length; i++) {
        var business = {
          name: test.resourceSets[0].resources[i].name,
          address: test.resourceSets[0].resources[i].Address.formattedAddress,
          phone: test.resourceSets[0].resources[i].PhoneNumber,
          website: test.resourceSets[0].resources[i].Website,
          streetAddress: test.resourceSets[0].resources[i].Address.addressLine,
          zip: test.resourceSets[0].resources[i].Address.postalCode
        };

        if(!this.brands.includes(business.name))
        {
          this.localCompanies.push(business);
        }

        /**console.log("outside the for loop")
        for (let j = 0; j < this.occurrences.size; j++) {
          console.log("checking occurrence of: " + business.name)
          var old = 0
          if (this.occurrences.get(business.name)) {
            // @ts-ignore
            old = this.occurrences.get(business.name)
          }
          this.occurrences.set(business.name, old + 1)
        }
        // remove everyone with multiple occurrences
        for (let j = 0; j < this.occurrences.size; j++) {
          // @ts-ignore
          if (this.occurrences.get(business.name) > 1) {
            if(this.brands.includes(this.localCompanies[j].name))
            this.localCompanies.splice(j, 1)
          }
        }

        console.log("go time")
        this.localCompanies.push(business);

      }*/
    }})
  }
}
